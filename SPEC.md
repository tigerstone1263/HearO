# HearO 기획-스펙-체크리스트

## 0. 문서 목적
- 기획 문서를 코드에 직접 연결할 수 있도록 스펙과 작업 체크리스트를 한 곳에서 관리한다.
- 모든 구현 작업은 본 문서의 작업 항목을 먼저 갱신한 뒤 진행한다.

## 1. 프로젝트 개요
- 게임명: HearO (히어로)
- 장르: 2D 탑다운 청음 교육 RPG (Roguelike-ish)
- 플랫폼: Web & Mobile (Android/iOS) - 가로 모드 고정
- 핵심 기술: Flutter, Flame Engine
- 컨셉: 뱀파이어 서바이벌 UI/UX를 차용한 직관적인 청음 훈련 게임

## 2. 시스템 사양 및 환경
| 구분 | 상세 내용 | 비고 |
| --- | --- | --- |
| 개발 프레임워크 | Flutter (Flame Engine) | 멀티플랫폼 대응 |
| 화면 방향 | Landscape (가로 모드) | Web에서도 16:9 비율 유지 권장 |
| 사운드 시스템 | MIDI 사운드 또는 고음질 샘플링 음원 | 청음 교육의 핵심 |
| 해상도 | 가변 해상도 대응 (Responsive Layout) |  |

## 3. 상세 스펙 (Functional Specs)

### 3.1 캐릭터 (Player)
- 위치: 화면 중앙 고정 (카메라가 캐릭터를 추적)
- 이동: 좌측 하단 가상 조이스틱으로 8방향 이동
- 청음 영역 (Listening Circle)
  - 캐릭터 발밑에 본인 크기의 약 3배인 반투명 원 표시
  - 몬스터가 이 원 안에 진입할 경우 해당 몬스터의 고유 음계(Pitch)가 재생됨
- 체력 시스템
  - 기본 하트 3개 소지
  - 몬스터 충돌 시 하트 1개 감소
  - 하트 0 도달 시 게임 오버 및 결과 화면 노출

### 3.2 몬스터 (Monsters)
- 일반 패턴: 캐릭터를 향해 등속도로 돌진
- 상호작용
  - 정답: 몬스터의 음과 일치하는 건반 입력 시 몬스터 소멸 -> 황금 음표 보상 드랍
  - 오답: 몬스터가 분노 상태로 변화 (붉은색 이펙트 + 이동속도 대폭 증가)
- 보상: 난이도(음계 복잡도)가 높을수록 드랍되는 황금 음표의 크기와 점수 증가

### 3.3 인터페이스 (UI/UX)
- 인게임 UI
  - 좌측 하단: 가상 조이스틱 (이동)
  - 우측 하단: 투명 피아노 건반 (입력부, 최소 도~시 대응)
  - 상단 중앙: 캐릭터 체력(하트) 및 진행 시간/점수
- 피아노 건반: 터치/클릭 시 시각적 피드백(눌림 효과) 및 해당 음 재생

### 3.4 레벨 디자인 및 난이도 곡선
- 난이도 상승: 30초마다 스테이지(페이즈) 전환

| 스테이지 | 시간 | 등장 음계 | 특징 |
| --- | --- | --- | --- |
| Stage 1 | 00~30s | 도, 레, 미 | 매우 느린 이동 속도 |
| Stage 2 | 30~60s | 도, 레, 미, 파, 솔 | 이동 속도 증가 |
| Stage 3 | 60~90s | 도~시 (1옥타브) | 빠른 이동 속도 |
| Stage 4 | 90s~종료 | 보스전 (도~시) | 고정형 보스, 원거리 공격, 하트 5개 |

- 보스전 (Stage 4)
  - 중앙 또는 특정 위치에 고정됨
  - 사용자가 음을 맞출 때마다 보스의 하트가 0.5개 감소 (총 10회 정답 필요)
  - 정답 처리 시 보스의 음계가 랜덤하게 재설정됨

## 4. 작업 규칙 (필수)
- 모든 작업은 시작 전에 본 문서의 작업 체크리스트에 먼저 반영한다.
- 작업 절차는 "문서 업데이트 -> 구현 -> 테스트 -> 완료 체크" 순서를 반드시 따른다.
- 완료 체크는 테스트 방법을 실제로 수행하고 사용자가 확인한 후에만 한다.
- 모든 작업은 한 작업 항목당 하나의 커밋으로 관리한다.
- 커밋 메시지는 Task ID와 Tests 항목을 반드시 포함한다.

## 5. 작업 체크리스트

### Phase 0. 문서/워크플로 세팅
- [x] P0-01 문서/워크플로 정비 (템플릿/훅/규칙 정착)
  - 구현 피처: 스펙/체크리스트 문서 정리, 커밋 템플릿 및 훅 적용
  - 연관 피처: 전체 작업 절차와 커밋 단위 관리
  - 검증:
    - `git commit` 시 템플릿이 적용되고 Task/Tests 누락 시 커밋이 차단되는지 확인

### Phase 1. 환경 구축 및 캐릭터
- [x] P1-01 Flutter Flame 프로젝트 셋업 (Web/Mobile 타겟)
  - 구현 피처: Flutter/Flame 기본 실행, Web/모바일 빌드 타겟 준비, 가로 모드 전제 구성
  - 연관 피처: 모든 런타임/입력/렌더링 구성의 기반
  - 검증:
    - `flutter run -d chrome` 실행이 성공하고 기본 화면이 정상 렌더링
    - 모바일 타겟에서도 기본 런치가 가능한지 확인

- [x] P1-02 캐릭터 스프라이트 시트 애니메이션 (Idle/Walk)
  - 구현 피처: 플레이어 스프라이트 로딩, Idle/Walk 애니메이션 전환 (임시 placeholder 시트 사용)
  - 연관 피처: 입력 이동 로직, 상태 기반 애니메이션
  - 검증:
    - 방향키 입력 시 Walk 애니메이션으로 전환
    - 입력이 없을 때 Idle 애니메이션으로 복귀

- [x] P1-03 좌측 하단 조이스틱 연동 및 8방향 이동
  - 구현 피처: 가상 조이스틱 입력, 8방향 이동/속도 제어 (키보드 입력 유지)
  - 연관 피처: 카메라 추적, Listening Circle 위치 갱신, 몬스터 추적 AI
  - 검증:
    - 조이스틱 방향에 맞게 캐릭터가 이동
    - 대각선 입력이 8방향으로 자연스럽게 반영

- [x] P1-04 Listening Circle 렌더링 및 충돌 감지 레이어
  - 구현 피처: 캐릭터 기준 반투명 원 렌더링, 몬스터 진입 감지 (충돌 레이어 구성)
  - 연관 피처: 몬스터 음계 재생 트리거, 판정 시스템
  - 검증:
    - 원이 캐릭터와 함께 이동하며 일정 반경을 유지
    - 몬스터가 원에 들어오면 이벤트가 발생

### Phase 2. 사운드 및 몬스터 시스템
- [x] P2-01 오디오 엔진 연동 및 음계별 리소스 확보
  - 구현 피처: audioplayers 연동, 음계별 샘플 재생 (임시 사인파 wav 리소스 포함), 웹 자동재생 제한 대응 오버레이
  - 연관 피처: 몬스터 음계 트리거, 건반 입력 피드백
  - 검증:
    - 지정한 음계가 즉시 재생되고 중복 재생 시 안정적으로 처리
    - `flutter run -d chrome` 실행 후 A/S/D/F/G/H/J 키로 음계 재생 확인

- [x] P2-02 몬스터 스폰 시스템 (화면 밖 생성 후 캐릭터 추적)
  - 구현 피처: 스폰 타이머, 오프스크린 생성, 추적 이동 (placeholder 몬스터)
  - 연관 피처: 난이도 매니저, 스테이지별 속도 변경
  - 검증:
    - 몬스터가 화면 밖에서 생성되어 캐릭터 방향으로 이동

- [x] P2-03 몬스터별 고유 음계 할당 및 Listening Circle 진입 재생
  - 구현 피처: 몬스터 생성 시 음계 할당, Listening Circle 진입 시 음계 재생
  - 연관 피처: 판정 시스템, 오디오 엔진
  - 검증:
    - 동일 몬스터는 동일 음계를 유지
    - 원 진입 시 음계가 재생됨

- [x] P2-04 몬스터 분노 모드 상태 머신
  - 구현 피처: 오답 판정 시 분노 상태 전환, 색상/속도 변화 (임시 키 입력 트리거)
  - 연관 피처: 판정 시스템, 몬스터 이동 로직
  - 검증:
    - X 키 입력 시 분노 상태(색상/속도 증가)로 전환
    - C 키 입력 시 분노 상태 해제

### Phase 3. 전투 및 인터페이스
- [ ] P3-01 우측 하단 투명 피아노 건반 UI 레이아웃
  - 구현 피처: 도~시 범위 건반 배치, 터치/클릭 인터랙션 영역
  - 연관 피처: 오디오 엔진, 판정 시스템
  - 검증:
    - 각 건반을 눌렀을 때 시각적 피드백이 표시

- [ ] P3-02 건반 입력값과 근접 몬스터 음계 비교 (판정 시스템)
  - 구현 피처: 입력 음계 vs 몬스터 음계 비교, 정답/오답 결과 산출
  - 연관 피처: 몬스터 소멸, 분노 모드 전환, 보상 시스템
  - 검증:
    - 정답 입력 시 몬스터가 소멸하고 보상이 발생
    - 오답 입력 시 몬스터가 분노 상태로 전환

- [ ] P3-03 황금 음표 드랍 및 점수 획득 시스템
  - 구현 피처: 보상 오브젝트 생성, 점수 누적
  - 연관 피처: UI 점수 표시, 난이도에 따른 보상 크기
  - 검증:
    - 정답 처리 시 황금 음표가 생성되고 점수가 증가

- [ ] P3-04 캐릭터 HP 시스템 및 충돌 무적 시간
  - 구현 피처: 하트 3개 표시, 충돌 시 감소, 무적 시간 부여
  - 연관 피처: 게임 오버 처리, UI 상태 표시
  - 검증:
    - 몬스터와 충돌 시 하트가 1 감소
    - 무적 시간 동안 추가 충돌이 무시됨

### Phase 4. 스테이지 및 보스전
- [ ] P4-01 30초 단위 난이도 관리 매니저
  - 구현 피처: 타이머 기반 스테이지 전환, 단계 상태 관리
  - 연관 피처: 몬스터 스폰/속도, 음계 범위 변경
  - 검증:
    - 30초 경과 시 스테이지가 전환됨

- [ ] P4-02 스테이지별 몬스터 속도 및 음계 범위 동적 변경
  - 구현 피처: 스테이지별 이동 속도/음계 풀 적용
  - 연관 피처: 스폰 시스템, 판정 시스템
  - 검증:
    - 각 스테이지에서 지정된 음계 범위가 적용됨

- [ ] P4-03 보스 몬스터 AI
  - 구현 피처: 고정 위치, 원거리 투사체, 랜덤 음계 변경
  - 연관 피처: 판정 시스템, HP 시스템, 스테이지 관리
  - 검증:
    - 보스가 고정 위치에서 공격하고, 정답 입력 시 음계가 변경됨
    - 총 10회 정답 시 보스가 처치됨

- [ ] P4-04 클리어 기록 및 게임 오버 화면
  - 구현 피처: 게임 오버 및 클리어 화면, 기록 저장/표시
  - 연관 피처: HP 시스템, 스테이지 전환
  - 검증:
    - 하트 0 도달 시 게임 오버 화면이 표시
    - 보스 처치 시 클리어 화면이 표시
